# Cursor Rules for DondeLasPapasQueman BGA Game

## Build Process

**IMPORTANT**: After making changes to files in `modules/src/` (TypeScript or SCSS), you MUST run the build command to generate the compiled files:

- `modules/js/Game.js` (from `modules/src/dondelaspapasqueman.ts`)
- `dondelaspapasqueman.css` (from `modules/src/dondelaspapasqueman.scss`)

### Build Commands:

- `npm run build` - Builds both TypeScript and SCSS
- `npm run build:ts` - Builds only TypeScript
- `npm run build:scss` - Builds only SCSS

### When to Build:

- After editing `modules/src/dondelaspapasqueman.ts`
- After editing `modules/src/dondelaspapasqueman.scss`
- Before deploying to server (if src files were changed)

### Important Notes:

- **DO NOT use `rm` before rebuilding** - The build process automatically replaces the output files. Just run `npm run build` or `npm run build:ts` directly.
- PHP files in `modules/php/` do NOT need building - they are used directly
- Only TypeScript and SCSS source files need compilation

## State Machine Diagram Maintenance

**IMPORTANT**: When making changes to game state files, you MUST update `STATE_MACHINE.md` to keep the diagram accurate.

### When to Update STATE_MACHINE.md:

- After modifying any file in `modules/php/States/` (e.g., `PlayerTurn.php`, `ReactionPhase.php`, `NextPlayer.php`, etc.)
- When adding, removing, or modifying state transitions
- When changing state IDs, types, or descriptions
- When adding or removing possible actions from states
- When modifying the flow between states

### What to Update:

- State transitions in the mermaid diagram
- State descriptions and their transitions
- Key game flow paths section
- Notes explaining state behaviors

### Files That Trigger This Requirement:

- `modules/php/States/*.php` - Any state class file
- `modules/php/Game.php` - If state machine initialization changes
